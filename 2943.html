<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <title>Max Square Hole ‚Äì Advanced Visualizer</title>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <style>
            /* ================= RESET ================= */
            * {
                  box-sizing: border-box;
                  margin: 0;
                  padding: 0;
            }

            /* ================= BASE ================= */
            body {
                  font-family: Inter, system-ui, sans-serif;
                  background: #ffffff;
                  color: #0f172a;
            }

            .container {
                  max-width: 1200px;
                  margin: auto;
                  padding: 30px 16px;
            }

            h1 {
                  text-align: center;
                  margin-bottom: 8px;
            }

            .subtitle {
                  text-align: center;
                  color: #64748b;
                  margin-bottom: 30px;
            }

            /* ================= CARD ================= */
            .card {
                  background: #fff;
                  border-radius: 18px;
                  padding: 24px;
                  margin-bottom: 26px;
                  box-shadow: 0 12px 30px rgba(0, 0, 0, .08);
            }

            /* ================= INPUT ================= */
            .inputs {
                  display: flex;
                  gap: 12px;
                  flex-wrap: wrap;
                  justify-content: center;
            }

            input {
                  padding: 12px 14px;
                  border-radius: 12px;
                  border: 1px solid #cbd5e1;
                  min-width: 220px;
            }

            /* ================= BUTTON ================= */
            .controls {
                  display: flex;
                  justify-content: center;
                  gap: 12px;
                  margin-top: 16px;
                  flex-wrap: wrap;
            }

            button {
                  padding: 12px 18px;
                  border: none;
                  border-radius: 12px;
                  font-weight: 600;
                  cursor: pointer;
            }

            .primary {
                  background: #2563eb;
                  color: white;
            }

            .secondary {
                  background: #f1f5f9;
            }

            /* ================= EXPLANATION ================= */
            .explain {
                  margin-top: 18px;
                  padding: 16px;
                  background: #f8fafc;
                  border-radius: 14px;
                  font-size: 15px;
                  line-height: 1.6;
            }

            /* ================= GRID ================= */
            .grid-wrap {
                  overflow: auto;
            }

            .grid {
                  display: grid;
                  margin: 20px auto;
            }

            .cell {
                  width: 34px;
                  height: 34px;
                  border: 1px solid #cbd5e1;
                  background: white;
            }

            .hole {
                  background: #2563eb;
            }

            .removed {
                  background: #e2e8f0;
            }

            /* ================= FLOW ================= */
            .flow {
                  display: grid;
                  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                  gap: 12px;
            }

            .flow div {
                  background: #f1f5f9;
                  padding: 14px;
                  border-radius: 12px;
                  text-align: center;
                  font-size: 14px;
            }

            /* ================= MOBILE ================= */
            @media(max-width:600px) {
                  .cell {
                        width: 28px;
                        height: 28px;
                  }
            }
      </style>
</head>

<body>

      <div class="container">

            <h1>Maximize Square Hole</h1>
            <p class="subtitle">Advanced GSAP Grid Bar Removal Visualizer</p>

            <!-- PROBLEM SUMMARY -->
            <div class="card">
                  <h3>üìò Problem Summary</h3>
                  <p>
                        The grid is formed by horizontal and vertical bars.
                        Every cell is initially <b>1 √ó 1</b>.
                        Removing <b>consecutive bars</b> creates larger empty spaces.
                        Our goal is to find the <b>largest possible square-shaped hole</b>.
                  </p>
            </div>

            <!-- INPUT -->
            <div class="card">
                  <h3>üéØ Inputs</h3>
                  <div class="inputs">
                        <input id="hBars" value="2,3" placeholder="Horizontal bars (2,3)">
                        <input id="vBars" value="2" placeholder="Vertical bars (2)">
                  </div>

                  <div class="controls">
                        <button class="primary" onclick="play()">‚ñ∂ Play</button>
                        <button class="secondary" onclick="step()">Next Step</button>
                        <button class="secondary" onclick="resetAll()">Reset</button>
                  </div>

                  <div class="explain" id="explain">
                        Click <b>Play</b> to start the visualization.
                  </div>
            </div>

            <!-- FLOW -->
            <div class="card">
                  <h3>üîÅ Algorithm Flow</h3>
                  <div class="flow">
                        <div>Sort Bars</div>
                        <div>Find Longest Consecutive</div>
                        <div>Convert to Gaps</div>
                        <div>Min Gap ‚Üí Square Side</div>
                        <div>Side √ó Side ‚Üí Area</div>
                  </div>
            </div>

            <!-- GRID -->
            <div class="card">
                  <h3>üß± Grid & Bar Removal Animation</h3>
                  <div class="grid-wrap">
                        <div id="grid" class="grid"></div>
                  </div>
            </div>

      </div>

      <script>
            let steps = [], idx = 0, side = 0;
            const SIZE = 8;

            function maxConsecutive(arr) {
                  arr.sort((a, b) => a - b);
                  let max = 1, cur = 1;
                  for (let i = 1; i < arr.length; i++) {
                        if (arr[i] === arr[i - 1] + 1) cur++;
                        else cur = 1;
                        max = Math.max(max, cur);
                  }
                  return max;
            }

            function buildGrid() {
                  const grid = document.getElementById("grid");
                  grid.innerHTML = "";
                  grid.style.gridTemplateColumns = `repeat(${SIZE},34px)`;
                  for (let i = 0; i < SIZE * SIZE; i++) {
                        const c = document.createElement("div");
                        c.className = "cell";
                        grid.appendChild(c);
                  }
            }

            function play() {
                  const h = document.getElementById("hBars").value.split(",").map(Number);
                  const v = document.getElementById("vBars").value.split(",").map(Number);

                  const hGap = maxConsecutive(h) + 1;
                  const vGap = maxConsecutive(v) + 1;
                  side = Math.min(hGap, vGap);

                  steps = [
                        "Initial grid created with all bars.",
                        "Removing selected horizontal & vertical bars.",
                        `Horizontal gap = ${hGap}`,
                        `Vertical gap = ${vGap}`,
                        `Square side = ${side}`,
                        `Final area = ${side * side}`
                  ];

                  idx = 0;
                  buildGrid();
                  step();
            }

            function step() {
                  if (idx >= steps.length) return;
                  document.getElementById("explain").innerHTML = steps[idx];
                  gsap.fromTo(".explain", { opacity: 0, y: 10 }, { opacity: 1, y: 0 });

                  if (idx === 1) animateBarRemoval();
                  if (idx === 4) animateSquare();

                  idx++;
            }

            function animateBarRemoval() {
                  const cells = document.querySelectorAll(".cell");
                  gsap.to(cells, {
                        background: "#e2e8f0",
                        stagger: { amount: 0.6 },
                        duration: 0.4
                  });
            }

            function animateSquare() {
                  const grid = document.getElementById("grid");
                  grid.style.gridTemplateColumns = `repeat(${side},34px)`;
                  grid.innerHTML = "";
                  for (let i = 0; i < side * side; i++) {
                        const c = document.createElement("div");
                        c.className = "cell hole";
                        grid.appendChild(c);
                        gsap.fromTo(c,
                              { scale: 0 },
                              { scale: 1, duration: .3, delay: i * 0.04 }
                        );
                  }
            }

            function resetAll() {
                  document.getElementById("grid").innerHTML = "";
                  document.getElementById("explain").innerHTML = "Reset complete.";
                  idx = 0;
            }
      </script>

</body>

</html>