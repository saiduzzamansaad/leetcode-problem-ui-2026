<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<title>Binary Tree Max Product ‚Äì Ultimate Visualizer</title>

<!-- Manrope -->
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- React -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

<!-- Babel -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body { font-family: 'Manrope', sans-serif; background:#f8fafc; }
.node { transition: all .4s ease; }
.active { transform: scale(1.25); box-shadow:0 0 0 12px rgba(59,130,246,.25); }
.bestEdge { stroke:#22c55e; stroke-width:4; }
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

/* TREE DATA */
const tree = {
  id:1,val:1,
  left:{ id:2,val:2,left:{id:4,val:4},right:{id:5,val:5}},
  right:{ id:3,val:3,right:{id:6,val:6}}
};

/* DFS ANALYSIS */
function analyze(root){
  let total=0;
  const steps=[];
  function dfs(n){
    if(!n) return 0;
    steps.push({type:"enter",id:n.id});
    const l=dfs(n.left);
    const r=dfs(n.right);
    const s=n.val+l+r;
    steps.push({type:"compute",id:n.id,sum:s});
    return s;
  }
  total=dfs(root);
  steps.forEach(x=>{
    if(x.sum!=null) x.product=x.sum*(total-x.sum);
  });
  return {steps,total};
}

function App(){
  const {steps,total}=analyze(tree);
  const [i,setI]=useState(0);
  const [play,setPlay]=useState(false);
  const [speed,setSpeed]=useState(1000);
  const [active,setActive]=useState(null);
  const [info,setInfo]=useState("");

  useEffect(()=>{
    if(!play || i>=steps.length) return;
    const t=setTimeout(()=>{
      const s=steps[i];
      setActive(s.id);
      if(s.type==="compute"){
        setInfo(`Subtree=${s.sum}, Other=${total-s.sum}, Product=${s.product}`);
      }
      setI(i+1);
    },speed);
    return()=>clearTimeout(t);
  },[play,i,speed]);

  return (
    <>
    {/* NAV */}
    <nav className="fixed top-4 left-1/2 -translate-x-1/2 bg-white shadow rounded-full px-8 py-4 w-[95%] max-w-6xl flex justify-between z-50">
      <b>Algorithm Visual Lab</b>
      <span className="text-slate-500">Ultimate 2026 Edition</span>
    </nav>

    <main className="pt-28 max-w-6xl mx-auto px-4">

      {/* HERO */}
      <section className="text-center mb-14">
        <h1 className="text-4xl font-extrabold mb-3">
          Maximum Product of Splitted Binary Tree
        </h1>
        <p className="text-slate-600">
          DFS Auto-Play ‚Ä¢ Animation ‚Ä¢ Interview Mode
        </p>
      </section>

      {/* VISUAL */}
      <section className="bg-white shadow rounded-3xl p-8 mb-16">
        <SVGTree active={active}/>
      </section>

      {/* CONTROLS */}
      <section className="grid md:grid-cols-3 gap-6 mb-20">
        <div className="bg-white shadow rounded-xl p-6">
          <button onClick={()=>setPlay(true)}
            className="w-full bg-green-500 text-white py-2 rounded mb-2">
            ‚ñ∂ Play
          </button>
          <button onClick={()=>{setPlay(false);setI(0);setActive(null);}}
            className="w-full bg-slate-200 py-2 rounded">
            ‚èπ Reset
          </button>
          <label className="block mt-4 text-sm">
            Speed
            <input type="range" min="300" max="2000"
              value={speed}
              onChange={e=>setSpeed(e.target.value)}
              className="w-full"/>
          </label>
        </div>

        <div className="bg-white shadow rounded-xl p-6">
          <h2 className="font-bold mb-2">üß† Current Step</h2>
          <p className="text-green-600 text-sm">
            {info || "DFS ‡¶ö‡¶≤‡¶õ‡ßá‚Ä¶"}
          </p>
        </div>

        <div className="bg-white shadow rounded-xl p-6">
          <h2 className="font-bold mb-2">üìò How It Works</h2>
          <ul className="list-disc ml-5 text-slate-600 text-sm space-y-1">
            <li>DFS ‡¶¶‡¶ø‡ßü‡ßá subtree sum ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶ø</li>
            <li>‡¶è‡¶ï‡¶ü‡¶æ edge ‡¶ï‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡¶®‡¶æ ‡¶ß‡¶∞‡¶ø</li>
            <li>Maximum product ‡¶∞‡¶æ‡¶ñ‡¶ø</li>
          </ul>
        </div>
      </section>

      {/* FOOTER */}
      <footer className="bg-white rounded-t-3xl shadow p-10 text-center text-slate-500">
        <b className="text-slate-700">
          Algorithm Visual Learning Platform ‚Äì 2026
        </b>
        <p className="text-sm mt-2">
          Built for Interview ‚Ä¢ Teaching ‚Ä¢ Portfolio
        </p>
      </footer>

    </main>
    </>
  );
}

/* SVG TREE */
function SVGTree({active}){
  const nodes=[],edges=[];
  function walk(n,x,y,g){
    nodes.push({...n,x,y});
    if(n.left){edges.push([n.id,n.left.id]);walk(n.left,x-g,y+100,g/1.8);}
    if(n.right){edges.push([n.id,n.right.id]);walk(n.right,x+g,y+100,g/1.8);}
  }
  walk(tree,400,60,180);

  return(
    <svg width="100%" height="400">
      {edges.map(([f,t])=>{
        const a=nodes.find(n=>n.id===f);
        const b=nodes.find(n=>n.id===t);
        return(
          <path key={t}
            d={`M ${a.x} ${a.y+25} C ${a.x} ${a.y+70}, ${b.x} ${b.y-70}, ${b.x} ${b.y}`}
            fill="none" stroke="#94a3b8"/>
        );
      })}
      {nodes.map(n=>(
        <g key={n.id}>
          <circle cx={n.x} cy={n.y} r="22"
            fill={active===n.id?"#ef4444":"#3b82f6"}
            className={active===n.id?"active":""}/>
          <text x={n.x} y={n.y+5} textAnchor="middle"
            fill="white" fontSize="14" fontWeight="bold">
            {n.val}
          </text>
        </g>
      ))}
    </svg>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
