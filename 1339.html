<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<title>Binary Tree Max Product ‚Äì 2026 Pro Visualizer</title>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- React -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

<!-- Babel -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
  body { font-family: 'Manrope', sans-serif; }

  .glass {
    background: rgba(15,23,42,0.65);
    backdrop-filter: blur(16px);
  }

  .node {
    transition: all .4s ease;
  }

  .active {
    box-shadow: 0 0 0 12px rgba(59,130,246,.25);
    transform: scale(1.15);
  }

  svg path {
    stroke-dasharray: 6;
    animation: flow 1s linear infinite;
  }

  @keyframes flow {
    to { stroke-dashoffset: -12; }
  }
</style>
</head>

<body class="bg-slate-900 text-slate-100">
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

/* ---------- DEFAULT TREE ---------- */
const defaultTree = {
  val: 1,
  left: {
    val: 2,
    left: { val: 4 },
    right: { val: 5 }
  },
  right: {
    val: 3,
    right: { val: 6 }
  }
};

/* ---------- HELPERS ---------- */
function clone(obj) {
  return JSON.parse(JSON.stringify(obj));
}

function calcTotal(node) {
  if (!node) return 0;
  return node.val + calcTotal(node.left) + calcTotal(node.right);
}

/* ---------- APP ---------- */
function App() {
  const [tree, setTree] = useState(defaultTree);
  const [active, setActive] = useState(null);
  const [auto, setAuto] = useState(false);
  const [steps, setSteps] = useState([]);
  const [stepIndex, setStepIndex] = useState(0);
  const [result, setResult] = useState(null);
  const [jsonInput, setJsonInput] = useState(JSON.stringify(defaultTree, null, 2));

  const totalSum = calcTotal(tree);

  /* ---------- BUILD DFS STEPS ---------- */
  useEffect(() => {
    const list = [];
    function dfs(n) {
      if (!n) return 0;
      const left = dfs(n.left);
      const right = dfs(n.right);
      const sum = n.val + left + right;
      list.push({ node: n, sum });
      return sum;
    }
    dfs(tree);
    setSteps(list);
    setStepIndex(0);
    setActive(null);
  }, [tree]);

  /* ---------- AUTOPLAY ---------- */
  useEffect(() => {
    if (!auto) return;
    if (stepIndex >= steps.length) {
      setAuto(false);
      return;
    }
    const t = setTimeout(() => {
      setActive(steps[stepIndex].node);
      setResult({
        sum: steps[stepIndex].sum,
        product: steps[stepIndex].sum * (totalSum - steps[stepIndex].sum)
      });
      setStepIndex(i => i + 1);
    }, 1200);
    return () => clearTimeout(t);
  }, [auto, stepIndex, steps]);

  /* ---------- APPLY JSON ---------- */
  function applyTree() {
    try {
      const parsed = JSON.parse(jsonInput);
      setTree(clone(parsed));
    } catch {
      alert("‚ùå Invalid JSON Tree");
    }
  }

  return (
    <>
      {/* NAV */}
      <nav className="glass fixed top-4 left-1/2 -translate-x-1/2 w-[95%] max-w-7xl rounded-full px-8 py-4 flex justify-between shadow-xl z-50">
        <span className="font-extrabold">üå≥ Algorithm Visual Lab</span>
        <span className="text-sm text-slate-300">DFS ‚Ä¢ Tree ‚Ä¢ 2026 UI</span>
      </nav>

      <main className="pt-28 max-w-7xl mx-auto px-4">

        {/* HERO */}
        <section className="text-center mb-16">
          <h1 className="text-4xl md:text-5xl font-extrabold mb-4">
            Maximum Product of Splitted Binary Tree
          </h1>
          <p className="text-slate-400 max-w-3xl mx-auto">
            Auto-play DFS animation, SVG curved edges ‡¶è‡¶¨‡¶Ç real-life explanation ‡¶∏‡¶π
          </p>
        </section>

        {/* VISUAL */}
        <section className="grid md:grid-cols-3 gap-10">
          {/* TREE */}
          <div className="md:col-span-2 bg-slate-800 rounded-2xl p-8 relative">
            <Tree node={tree} active={active} />
          </div>

          {/* CONTROLS */}
          <div className="bg-slate-800 rounded-2xl p-6">
            <h2 className="font-bold text-xl mb-4">üé¨ DFS Control</h2>

            <button
              onClick={() => setAuto(true)}
              className="w-full bg-green-500 py-2 rounded mb-2"
            >
              ‚ñ∂ Auto Play DFS
            </button>

            <button
              onClick={() => {
                setAuto(false);
                setStepIndex(0);
                setActive(null);
              }}
              className="w-full bg-slate-700 py-2 rounded"
            >
              ‚èπ Reset
            </button>

            {result && (
              <div className="mt-4 bg-slate-900 p-3 rounded text-sm text-green-400">
                Subtree = {result.sum}<br/>
                Other = {totalSum - result.sum}<br/>
                Product = {result.product}
              </div>
            )}
          </div>
        </section>

        {/* INPUT */}
        <section className="mt-20 grid md:grid-cols-2 gap-10">
          <div>
            <h2 className="text-2xl font-bold mb-3">üß© Dynamic Tree Input</h2>
            <textarea
              value={jsonInput}
              onChange={e => setJsonInput(e.target.value)}
              className="w-full h-60 bg-slate-800 p-4 rounded text-sm"
            />
            <button
              onClick={applyTree}
              className="mt-3 bg-blue-500 px-6 py-2 rounded"
            >
              Apply Tree
            </button>
          </div>

          <div>
            <h2 className="text-2xl font-bold mb-3">üìò Interview Explanation</h2>
            <ul className="list-disc ml-5 text-slate-300 space-y-2">
              <li>DFS ‡¶¶‡¶ø‡ßü‡ßá subtree sum ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶ø</li>
              <li>‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶æ edge ‡¶ï‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡¶ø</li>
              <li>Maximum product ‡¶∞‡¶æ‡¶ñ‡¶ø</li>
              <li>Time complexity O(N)</li>
            </ul>
          </div>
        </section>

        {/* FOOTER */}
        <footer className="mt-24 bg-slate-800 rounded-t-3xl p-10 text-center text-slate-400">
          <p className="font-semibold text-slate-200">
            üöÄ Algorithm Visual Learning Platform ‚Äì 2026
          </p>
          <p className="text-sm mt-2">
            Tree ‚Ä¢ DFS ‚Ä¢ Interview ‚Ä¢ Education
          </p>
        </footer>
      </main>
    </>
  );
}

/* ---------- TREE RENDER ---------- */
function Tree({ node, active }) {
  if (!node) return null;

  const isActive = active === node;

  return (
    <div className="flex flex-col items-center relative">
      <div className={`node w-14 h-14 rounded-full flex items-center justify-center
        ${isActive ? "bg-red-500 active" : "bg-blue-600"}`}>
        {node.val}
      </div>

      <div className="flex gap-16 mt-8">
        <Tree node={node.left} active={active} />
        <Tree node={node.right} active={active} />
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
